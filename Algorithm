from PIL import Image
import numpy as np

def load_and_convert(uploaded_file):
    """
    Takes a Streamlit uploaded file and returns a Pillow Image and
    a NumPy array suitable for K-Means or other processing.
    """
    # Load with Pillow
    img = Image.open(uploaded_file).convert("RGB")
    
    # Convert to NumPy array
    img_np = np.array(img)
    
    # Reshape for clustering: (num_pixels, 3)
    pixels = img_np.reshape(-1, 3)
    
    return img, img_np, pixels
